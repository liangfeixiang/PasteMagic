<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RSAç®—æ³•é…ç½®ä¿®å¤æµ‹è¯•</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-6">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold text-center mb-8">ğŸ” RSAç®—æ³•é…ç½®ä¿®å¤æµ‹è¯•</h1>
        
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h2 class="text-xl font-semibold mb-4">ğŸ“‹ é—®é¢˜æè¿°</h2>
            <div class="prose">
                <p><strong>ç”¨æˆ·åé¦ˆï¼š</strong>"RSA/CBC/PKCS5Padding rsa ä¿å­˜æ—¶ï¼ŒæŠŠæ¨¡å¼ï¼Œå¡«å……åŠ ä¸Šäº†ï¼Œéœ€è¦ä¿®æ”¹"</p>
                <p class="mt-3"><strong>é—®é¢˜åˆ†æï¼š</strong>RSAæ˜¯éå¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œä¸åº”è¯¥æœ‰CBCæ¨¡å¼å’ŒPKCS5Paddingå¡«å……ã€‚ä½†åœ¨é…ç½®ä¿å­˜æ—¶ï¼Œç³»ç»Ÿé”™è¯¯åœ°å°†è¿™äº›ä¿¡æ¯æ‹¼æ¥åˆ°äº†algorithmå­—æ®µä¸­ã€‚</p>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- é—®é¢˜ç°è±¡ -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <h3 class="text-lg font-semibold mb-4 text-red-600">âŒ é—®é¢˜ç°è±¡</h3>
                <div class="space-y-4">
                    <div>
                        <h4 class="font-medium text-gray-700 mb-2">é”™è¯¯çš„é…ç½®æ ¼å¼</h4>
                        <pre class="bg-red-50 p-3 rounded text-sm overflow-x-auto">{
  name: "rsa-config",
  algorithm: "RSA/CBC/PKCS5Padding",  // âŒ é”™è¯¯ï¼šRSAä¸åº”è¯¥æœ‰æ¨¡å¼å’Œå¡«å……
  algorithmType: "RSA",
  mode: "CBC",                       // âŒ é”™è¯¯ï¼šRSAä¸éœ€è¦æ¨¡å¼
  padding: "PKCS5Padding"            // âŒ é”™è¯¯ï¼šRSAä¸éœ€è¦å¡«å……
}</pre>
                    </div>
                    <div class="p-3 bg-red-50 rounded">
                        <p class="text-red-700 text-sm"><strong>é—®é¢˜å½±å“ï¼š</strong>å¯èƒ½å¯¼è‡´è§£å¯†æ—¶å‡ºç°æ··æ·†ï¼Œæˆ–è€…åœ¨ç®—æ³•è¯†åˆ«æ—¶äº§ç”Ÿé”™è¯¯</p>
                    </div>
                </div>
            </div>

            <!-- ä¿®å¤å -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <h3 class="text-lg font-semibold mb-4 text-green-600">âœ… ä¿®å¤åæ ¼å¼</h3>
                <div class="space-y-4">
                    <div>
                        <h4 class="font-medium text-gray-700 mb-2">æ­£ç¡®çš„é…ç½®æ ¼å¼</h4>
                        <pre class="bg-green-50 p-3 rounded text-sm overflow-x-auto">{
  name: "rsa-config",
  algorithm: "RSA",           // âœ… æ­£ç¡®ï¼šRSAç®—æ³•ä¿æŒçº¯å‡€
  algorithmType: "RSA",
  mode: "",                   // âœ… æ­£ç¡®ï¼šRSAä¸éœ€è¦æ¨¡å¼
  padding: ""                 // âœ… æ­£ç¡®ï¼šRSAä¸éœ€è¦å¡«å……
}</pre>
                    </div>
                    <div class="p-3 bg-green-50 rounded">
                        <p class="text-green-700 text-sm"><strong>æ”¹è¿›æ•ˆæœï¼š</strong>é…ç½®æ ¼å¼æ ‡å‡†åŒ–ï¼Œé¿å…ç®—æ³•æ··æ·†</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-lg shadow-md p-6 mt-6">
            <h2 class="text-xl font-semibold mb-4">ğŸ”§ ä¿®å¤è¯¦æƒ…</h2>
            
            <div class="space-y-4">
                <div class="p-4 bg-blue-50 rounded-lg">
                    <h3 class="font-medium text-blue-800 mb-2">ä¿®æ”¹ä½ç½®</h3>
                    <p class="text-blue-700">æ–‡ä»¶ï¼š<code>/src/pastemagic/component/keyconfigmanager.jsx</code></p>
                    <p class="text-blue-700">å‡½æ•°ï¼š<code>CipherTool</code>ç»„ä»¶çš„<code>onSave</code>å’Œ<code>onChange</code>å›è°ƒ</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="p-4 bg-gray-50 rounded">
                        <h4 class="font-medium mb-2">ä¿®æ”¹å‰ä»£ç </h4>
                        <pre class="text-xs overflow-x-auto">algorithm: merged.combined || 
  `${merged.algorithm}${merged.model ? '/' + merged.model : ''}${merged.padding ? '/' + merged.padding : ''}`</pre>
                    </div>
                    <div class="p-4 bg-gray-50 rounded">
                        <h4 class="font-medium mb-2">ä¿®æ”¹åä»£ç </h4>
                        <pre class="text-xs overflow-x-auto">algorithm: merged.algorithm === 'RSA' 
  ? 'RSA'  // RSAç®—æ³•ä¸éœ€è¦æ¨¡å¼å’Œå¡«å……
  : merged.combined || 
    `${merged.algorithm}${merged.model ? '/' + merged.model : ''}${merged.padding ? '/' + merged.padding : ''}`</pre>
                    </div>
                </div>

                <div class="p-4 bg-purple-50 rounded-lg">
                    <h3 class="font-medium text-purple-800 mb-2">åŒæ—¶æ¸…ç†ç›¸å…³å­—æ®µ</h3>
                    <pre class="text-xs bg-white p-2 rounded overflow-x-auto">// å¯¹äºRSAç®—æ³•ï¼ŒåŒæ—¶æ¸…ç©ºmodeå’Œpaddingå­—æ®µ
mode: merged.algorithm === 'RSA' ? '' : (merged.model || prev.mode),
padding: merged.algorithm === 'RSA' ? '' : (merged.hasOwnProperty('padding') ? merged.padding : prev.padding)</pre>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-lg shadow-md p-6 mt-6">
            <h2 class="text-xl font-semibold mb-4">ğŸ§ª åŠŸèƒ½æµ‹è¯•</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <h3 class="font-medium mb-3">æµ‹è¯•åœºæ™¯</h3>
                    <div class="space-y-3">
                        <div class="border rounded p-3">
                            <h4 class="font-medium text-sm mb-2">åœºæ™¯1ï¼šRSAé…ç½®ä¿å­˜</h4>
                            <ul class="text-xs text-gray-600 space-y-1">
                                <li>â€¢ é€‰æ‹©RSAç®—æ³•</li>
                                <li>â€¢ éªŒè¯algorithmå­—æ®µä¸ºçº¯"RSA"</li>
                                <li>â€¢ æ£€æŸ¥modeå’Œpaddingå­—æ®µä¸ºç©º</li>
                            </ul>
                        </div>
                        
                        <div class="border rounded p-3">
                            <h4 class="font-medium text-sm mb-2">åœºæ™¯2ï¼šå¯¹ç§°ç®—æ³•é…ç½®</h4>
                            <ul class="text-xs text-gray-600 space-y-1">
                                <li>â€¢ é€‰æ‹©AES/SM4ç®—æ³•</li>
                                <li>â€¢ éªŒè¯ä¿æŒåŸæœ‰æ¨¡å¼å¡«å……åŠŸèƒ½</li>
                                <li>â€¢ æ£€æŸ¥é…ç½®æ ¼å¼ä¸å—å½±å“</li>
                            </ul>
                        </div>
                        
                        <div class="border rounded p-3">
                            <h4 class="font-medium text-sm mb-2">åœºæ™¯3ï¼šç®—æ³•åˆ‡æ¢æµ‹è¯•</h4>
                            <ul class="text-xs text-gray-600 space-y-1">
                                <li>â€¢ RSA â†” AES åˆ‡æ¢</li>
                                <li>â€¢ éªŒè¯å­—æ®µæ¸…ç†æœºåˆ¶</li>
                                <li>â€¢ æ£€æŸ¥é…ç½®ä¸€è‡´æ€§</li>
                            </ul>
                        </div>
                        
                        <button onclick="runAlgorithmTests()" 
                                class="w-full bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded">
                            ğŸ”§ è¿è¡Œç®—æ³•æµ‹è¯•
                        </button>
                    </div>
                </div>
                
                <div>
                    <h3 class="font-medium mb-3">æµ‹è¯•ç»“æœ</h3>
                    <div id="algorithmTestResults" class="bg-gray-50 p-4 rounded min-h-[300px]">
                        <p class="text-gray-500">ç‚¹å‡»"è¿è¡Œç®—æ³•æµ‹è¯•"æŒ‰é’®å¼€å§‹æµ‹è¯•...</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-lg shadow-md p-6 mt-6">
            <h2 class="text-xl font-semibold mb-4">ğŸ“‹ æŠ€æœ¯è¯´æ˜</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="p-4 bg-green-50 rounded-lg">
                    <h3 class="font-medium text-green-800 mb-2">âœ… RSAç®—æ³•ç‰¹æ€§</h3>
                    <ul class="text-sm text-green-700 space-y-1">
                        <li>â€¢ éå¯¹ç§°åŠ å¯†ç®—æ³•</li>
                        <li>â€¢ ä½¿ç”¨PKCS#1æ ‡å‡†å¡«å……</li>
                        <li>â€¢ ä¸éœ€è¦æ¨¡å¼æ¦‚å¿µ</li>
                        <li>â€¢ ä¸éœ€è¦æ˜¾å¼å¡«å……å‚æ•°</li>
                    </ul>
                </div>
                <div class="p-4 bg-blue-50 rounded-lg">
                    <h3 class="font-medium text-blue-800 mb-2">ğŸ”§ å®ç°æœºåˆ¶</h3>
                    <ul class="text-sm text-blue-700 space-y-1">
                        <li>â€¢ ç®—æ³•ç±»å‹åˆ¤æ–­</li>
                        <li>â€¢ æ¡ä»¶æ€§å­—æ®µæ¸…ç†</li>
                        <li>â€¢ å‘åå…¼å®¹å¤„ç†</li>
                        <li>â€¢ é…ç½®æ ¼å¼æ ‡å‡†åŒ–</li>
                    </ul>
                </div>
                <div class="p-4 bg-purple-50 rounded-lg">
                    <h3 class="font-medium text-purple-800 mb-2">ğŸ¯ ç”¨æˆ·ä½“éªŒ</h3>
                    <ul class="text-sm text-purple-700 space-y-1">
                        <li>â€¢ ç•Œé¢é€»è¾‘ä¿æŒä¸€è‡´</li>
                        <li>â€¢ é…ç½®ä¿å­˜æ›´åŠ å‡†ç¡®</li>
                        <li>â€¢ é¿å…æ½œåœ¨çš„è§£å¯†é”™è¯¯</li>
                        <li>â€¢ æå‡ç³»ç»Ÿç¨³å®šæ€§</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ¨¡æ‹Ÿç®—æ³•é…ç½®å¤„ç†æµ‹è¯•
        function runAlgorithmTests() {
            const resultsDiv = document.getElementById('algorithmTestResults');
            
            // æµ‹è¯•ç”¨ä¾‹
            const testCases = [
                {
                    name: "RSAç®—æ³•é…ç½®å¤„ç†",
                    test: () => {
                        const rsaMerged = {
                            algorithm: 'RSA',
                            model: 'CBC',
                            padding: 'PKCS5Padding',
                            combined: 'RSA/CBC/PKCS5Padding'
                        };
                        
                        // æ¨¡æ‹Ÿä¿®å¤åçš„å¤„ç†é€»è¾‘
                        const algorithm = rsaMerged.algorithm === 'RSA' 
                            ? 'RSA'
                            : rsaMerged.combined || `${rsaMerged.algorithm}${rsaMerged.model ? '/' + rsaMerged.model : ''}${rsaMerged.padding ? '/' + rsaMerged.padding : ''}`;
                            
                        const mode = rsaMerged.algorithm === 'RSA' ? '' : rsaMerged.model;
                        const padding = rsaMerged.algorithm === 'RSA' ? '' : rsaMerged.padding;
                        
                        return algorithm === 'RSA' && mode === '' && padding === '';
                    }
                },
                {
                    name: "AESç®—æ³•é…ç½®å¤„ç†",
                    test: () => {
                        const aesMerged = {
                            algorithm: 'AES',
                            model: 'CBC',
                            padding: 'PKCS5Padding',
                            combined: 'AES/CBC/PKCS5Padding'
                        };
                        
                        // æ¨¡æ‹Ÿå¤„ç†é€»è¾‘
                        const algorithm = aesMerged.algorithm === 'RSA' 
                            ? 'RSA'
                            : aesMerged.combined || `${aesMerged.algorithm}${aesMerged.model ? '/' + aesMerged.model : ''}${aesMerged.padding ? '/' + aesMerged.padding : ''}`;
                            
                        const mode = aesMerged.algorithm === 'RSA' ? '' : aesMerged.model;
                        const padding = aesMerged.algorithm === 'RSA' ? '' : aesMerged.padding;
                        
                        return algorithm === 'AES/CBC/PKCS5Padding' && mode === 'CBC' && padding === 'PKCS5Padding';
                    }
                },
                {
                    name: "é…ç½®åˆ‡æ¢æµ‹è¯•",
                    test: () => {
                        // æ¨¡æ‹Ÿä»AESåˆ‡æ¢åˆ°RSAçš„è¿‡ç¨‹
                        const configs = [
                            { algorithm: 'AES', model: 'CBC', padding: 'PKCS5Padding' },
                            { algorithm: 'RSA', model: '', padding: '' }
                        ];
                        
                        let currentConfig = configs[0];
                        let processedConfigs = [];
                        
                        configs.forEach(cfg => {
                            const processed = {
                                algorithm: cfg.algorithm === 'RSA' ? 'RSA' : `${cfg.algorithm}/${cfg.model}/${cfg.padding}`,
                                mode: cfg.algorithm === 'RSA' ? '' : cfg.model,
                                padding: cfg.algorithm === 'RSA' ? '' : cfg.padding
                            };
                            processedConfigs.push(processed);
                        });
                        
                        // éªŒè¯å¤„ç†ç»“æœ
                        return processedConfigs[0].algorithm === 'AES/CBC/PKCS5Padding' &&
                               processedConfigs[1].algorithm === 'RSA' &&
                               processedConfigs[1].mode === '' &&
                               processedConfigs[1].padding === '';
                    }
                }
            ];

            let resultsHtml = '<div class="space-y-3">';
            
            testCases.forEach((testCase, index) => {
                try {
                    const passed = testCase.test();
                    resultsHtml += `
                        <div class="p-3 rounded ${passed ? 'bg-green-50 border border-green-200' : 'bg-red-50 border border-red-200'}">
                            <div class="flex items-center justify-between">
                                <span class="font-medium ${passed ? 'text-green-800' : 'text-red-800'}">
                                    ${testCase.name}
                                </span>
                                <span class="text-sm ${passed ? 'text-green-600' : 'text-red-600'}">
                                    ${passed ? 'âœ… é€šè¿‡' : 'âŒ å¤±è´¥'}
                                </span>
                            </div>
                        </div>
                    `;
                } catch (error) {
                    resultsHtml += `
                        <div class="p-3 rounded bg-red-50 border border-red-200">
                            <div class="flex items-center justify-between">
                                <span class="font-medium text-red-800">
                                    ${testCase.name}
                                </span>
                                <span class="text-sm text-red-600">
                                    âŒ é”™è¯¯: ${error.message}
                                </span>
                            </div>
                        </div>
                    `;
                }
            });
            
            resultsHtml += '</div>';
            resultsDiv.innerHTML = resultsHtml;
        }
    </script>
</body>
</html>